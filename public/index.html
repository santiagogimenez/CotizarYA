<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CotizarYA - USDT a ARS</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游눰</text></svg>">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-top">
        <div>
          <h1>CotizarYA</h1>
          <p class="subtitle">Convert칤 USDT a pesos argentinos en tiempo real</p>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="Cambiar tema">
          <span class="theme-icon"></span>
        </button>
      </div>
      <div class="branding">
        <span class="branding-text">by</span>
        <span class="branding-name">SG Soluciones Tecnol칩gicas</span>
      </div>
    </header>

    <main>
      <div class="rate-card">
        <div class="rate-info">
          <div class="rate-label">Cotizaci칩n USDT/ARS</div>
          <div class="rate-value" id="rateValue">--</div>
          <div class="rate-source">
            <span id="rateSource">Binance P2P</span>
            <span class="rate-timestamp" id="rateTimestamp">--</span>
          </div>
        </div>
        <button class="btn-refresh" id="btnRefresh" title="Actualizar cotizaci칩n">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
          </svg>
        </button>
      </div>

      <div class="calculator-card">
        <div class="form-group">
          <label for="usdtAmount">Monto en USDT</label>
          <input 
            type="number" 
            id="usdtAmount" 
            placeholder="Ej: 100" 
            min="0" 
            step="0.01"
            autocomplete="off"
          >
        </div>

        <div class="form-group">
          <label for="markup">Recargo / Markup (%)</label>
          <input 
            type="number" 
            id="markup" 
            placeholder="Ej: 5" 
            value="0"
            min="0" 
            step="0.5"
            autocomplete="off"
          >
        </div>

        <div class="form-group">
          <label for="rounding">Redondeo</label>
          <select id="rounding">
            <option value="0">Sin redondeo</option>
            <option value="10">Cada $10</option>
            <option value="50">Cada $50</option>
            <option value="100" selected>Cada $100</option>
            <option value="500">Cada $500</option>
          </select>
        </div>

        <div class="result-card">
          <div class="result-label">Precio final</div>
          <div class="result-value" id="resultValue">$ 0</div>
          <button class="btn-copy" id="btnCopy">Copiar precio</button>
        </div>
      </div>

      <!-- Comparador de Plataformas -->
      <div class="platforms-card">
        <div class="platforms-header">
          <div>
            <h3>游낁 Comparador de Plataformas</h3>
            <p class="platforms-subtitle">Encontr치 la mejor cotizaci칩n del mercado</p>
          </div>
          <button class="btn-refresh-platforms" id="btnRefreshPlatforms" title="Actualizar plataformas">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
            </svg>
          </button>
        </div>

        <div class="platforms-list" id="platformsList">
          <div class="platforms-loading">
            <div class="spinner"></div>
            <p>Consultando plataformas...</p>
          </div>
        </div>

        <div class="platforms-info">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 16v-4M12 8h.01"></path>
          </svg>
          <span>Los precios se actualizan cada 30 segundos. Verific치 siempre en la plataforma antes de operar.</span>
        </div>
      </div>

      <!-- Historial y Gr치ficos -->
      <div class="history-card">
        <div class="history-header">
          <div>
            <h3>游늵 Historial de Precios</h3>
            <p class="history-subtitle">Evoluci칩n del USDT/ARS en el tiempo</p>
          </div>
          <div class="period-selector">
            <button class="period-btn active" data-period="1h">1h</button>
            <button class="period-btn" data-period="6h">6h</button>
            <button class="period-btn" data-period="24h">24h</button>
            <button class="period-btn" data-period="7d">7d</button>
            <button class="period-btn" data-period="30d">30d</button>
          </div>
        </div>

        <div class="history-stats">
          <div class="stat-item">
            <div class="stat-label">M치ximo</div>
            <div class="stat-value" id="statMax">--</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">M칤nimo</div>
            <div class="stat-value" id="statMin">--</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Promedio</div>
            <div class="stat-value" id="statAvg">--</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Variaci칩n</div>
            <div class="stat-value" id="statChange">--</div>
          </div>
        </div>

        <div class="chart-container">
          <svg id="priceChart" width="100%" height="200" viewBox="0 0 800 200" preserveAspectRatio="none">
            <defs>
              <linearGradient id="chartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:rgba(0,217,255,0.3);stop-opacity:1" />
                <stop offset="100%" style="stop-color:rgba(0,217,255,0);stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
          <div class="chart-empty" id="chartEmpty">
            <p>游늳 Recopilando datos...</p>
            <span>El gr치fico se poblar치 autom치ticamente mientras uses la aplicaci칩n</span>
          </div>
        </div>
      </div>

      <!-- Alertas de Precio -->
      <div class="alerts-card">
        <div class="alerts-header">
          <h3>游댒 Alertas de Precio</h3>
          <p class="alerts-subtitle">Te notificamos cuando el USDT llegue a tu precio objetivo</p>
        </div>

        <div class="alerts-form">
          <div class="form-row">
            <div class="form-group-inline">
              <label for="alertPrice">Precio objetivo (ARS)</label>
              <input 
                type="number" 
                id="alertPrice" 
                placeholder="Ej: 1200" 
                min="0" 
                step="0.01"
                autocomplete="off"
              >
            </div>
            <div class="form-group-inline">
              <label for="alertType">Tipo de alerta</label>
              <select id="alertType">
                <option value="above">Cuando suba a</option>
                <option value="below">Cuando baje a</option>
              </select>
            </div>
          </div>
          <button class="btn-add-alert" id="btnAddAlert">+ Crear Alerta</button>
        </div>

        <div class="alerts-list" id="alertsList">
          <div class="alerts-empty">
            <p>游닔 No ten칠s alertas configuradas</p>
            <span>Configur치 una alerta para recibir notificaciones cuando el precio alcance tu objetivo</span>
          </div>
        </div>
      </div>

      <!-- Calculadora de Comisiones -->
      <div class="commission-card" id="commissionCard" style="display: none;">
        <div class="commission-header">
          <h3>游눯 Desglose de Comisiones</h3>
          <p class="commission-subtitle">Entend칠 el costo real de tu operaci칩n</p>
        </div>
        
        <div class="commission-content">
          <div class="commission-row">
            <span class="commission-label">Precio base (USDT 칑 Cotizaci칩n)</span>
            <span class="commission-value" id="commBase">$ 0</span>
          </div>
          
          <div class="commission-row highlight" id="markupRow" style="display: none;">
            <span class="commission-label">
              <span>Tu markup/recargo (<span id="commMarkupPercent">0</span>%)</span>
            </span>
            <span class="commission-value success" id="commMarkup">+ $ 0</span>
          </div>
          
          <div class="commission-divider"></div>
          
          <div class="commission-row">
            <span class="commission-label">Subtotal antes de redondeo</span>
            <span class="commission-value" id="commSubtotal">$ 0</span>
          </div>
          
          <div class="commission-row" id="roundingRow" style="display: none;">
            <span class="commission-label">Ajuste por redondeo</span>
            <span class="commission-value" id="commRounding">$ 0</span>
          </div>
          
          <div class="commission-divider"></div>
          
          <div class="commission-row total">
            <span class="commission-label">Total a cobrar</span>
            <span class="commission-value" id="commTotal">$ 0</span>
          </div>
        </div>
        
        <div class="commission-info">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 16v-4M12 8h.01"></path>
          </svg>
          <span>Este desglose te ayuda a entender cada peso que cobr치s o pag치s en la operaci칩n.</span>
        </div>
      </div>

      <div class="status-message" id="statusMessage"></div>
    </main>

    <footer>
      <p>Cotizaci칩n desde <strong>Binance P2P</strong> v칤a CriptoYa</p>
      <p class="footer-note">Actualizaci칩n autom치tica cada 30 segundos</p>
      <p class="footer-brand">춸 2025 SG Soluciones Tecnol칩gicas</p>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
